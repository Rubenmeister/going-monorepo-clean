import { UUID } from '@going-monorepo-clean/shared-domain'; // Reemplaza 'going-monorepo-clean' con el scope de tu monorepo

// Roles que el frontend necesita conocer
export type UserRole = 'admin' | 'user' | 'driver' | 'host';

export interface UserProps {
  id: UUID;
  email: string;
  firstName: string;
  roles: UserRole[];
}

export class AuthenticatedUser {
  readonly id: UUID;
  readonly email: string;
  readonly firstName: string;
  readonly roles: UserRole[];

  constructor(props: UserProps) {
    this.id = props.id;
    this.email = props.email;
    this.firstName = props.firstName;
    this.roles = props.roles;
  }

  public isAdmin(): boolean {
    return this.roles.includes('admin');
  }

  public isDriver(): boolean {
    return this.roles.includes('driver');
  }

  // --- MÃ©todos de Persistencia (para LocalStorage/Context) ---
  
  public toPrimitives(): UserProps {
    return { ...this };
  }

  public static fromPrimitives(props: UserProps): AuthenticatedUser {
    return new AuthenticatedUser(props);
  }
}