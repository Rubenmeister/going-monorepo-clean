{"version":3,"file":"main.js","mappings":"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","sources":["external commonjs \"reflect-metadata\"","external commonjs \"@nestjs/common\"","external commonjs \"@nestjs/core\"","external commonjs \"tslib\"","external commonjs \"@nestjs/config\"","external commonjs \"@nestjs/mongoose\"","external commonjs \"mongoose\"","C:\\Users\\USER1\\going-monorepo-clean\\user-auth-service\\src\\app\\schemas\\user.schema.ts","C:\\Users\\USER1\\going-monorepo-clean\\user-auth-service\\src\\app\\auth\\auth.service.ts","C:\\Users\\USER1\\going-monorepo-clean\\user-auth-service\\src\\app\\auth\\auth.controller.ts","C:\\Users\\USER1\\going-monorepo-clean\\user-auth-service\\src\\app\\auth\\auth.module.ts","C:\\Users\\USER1\\going-monorepo-clean\\user-auth-service\\src\\app\\app.module.ts","C:\\Users\\USER1\\going-monorepo-clean\\user-auth-service\\src\\main.ts"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = require(\"reflect-metadata\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@nestjs/common\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@nestjs/core\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"tslib\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@nestjs/config\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"@nestjs/mongoose\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"mongoose\");","import { Prop, Schema, SchemaFactory } from '@nestjs/mongoose';\nimport { Document } from 'mongoose';\n\nexport type UserDocument = User & Document;\n\n@Schema()\nexport class User {\n  @Prop({ required: true })\n  name: string;\n\n  @Prop({ required: true, unique: true })\n  email: string;\n\n  @Prop({ required: true })\n  password: string; // En producciÔøΩn esto se encripta\n}\n\nexport const UserSchema = SchemaFactory.createForClass(User);\r\n","import { Injectable, UnauthorizedException } from '@nestjs/common';\nimport { InjectModel } from '@nestjs/mongoose';\nimport { Model } from 'mongoose';\nimport { User, UserDocument } from '../schemas/user.schema';\n\n@Injectable()\nexport class AuthService {\n  constructor(@InjectModel(User.name) private userModel: Model<UserDocument>) {}\n\n  // 1. REGISTRO\n  async register(body: any) {\n    const newUser = new this.userModel(body);\n    return newUser.save();\n  }\n\n  // 2. VALIDACI√ìN (LOGIN)\n  async login(body: any) {\n    // Buscamos al usuario por email\n    const user = await this.userModel.findOne({ email: body.email });\n    \n    // Si no existe, error\n    if (!user) {\n      throw new UnauthorizedException('Usuario no encontrado');\n    }\n\n    // Verificamos contrase√±a (En producci√≥n usar√≠amos bcrypt aqu√≠)\n    if (user.password !== body.password) {\n      throw new UnauthorizedException('Contrase√±a incorrecta');\n    }\n\n    // Si todo bien, retornamos √©xito\n    return {\n      message: 'Login exitoso',\n      user: {\n        id: user._id,\n        name: user.name,\n        email: user.email,\n        role: 'CONDUCTOR' // Hardcodeado por ahora\n      },\n      access_token: 'token_falso_demo_123' // Aqu√≠ ir√≠a el JWT real\n    };\n  }\n\n  async findAll() {\n    return this.userModel.find().exec();\n  }\n}","import { Controller, Post, Get, Body, HttpCode, HttpStatus } from '@nestjs/common';\nimport { AuthService } from './auth.service';\n\n@Controller('auth')\nexport class AuthController {\n  constructor(private readonly authService: AuthService) {}\n\n  @Post('register')\n  async register(@Body() body: any) {\n    return this.authService.register(body);\n  }\n\n  @Post('login')\n  @HttpCode(HttpStatus.OK) // Para devolver c√≥digo 200 en vez de 201\n  async login(@Body() body: any) {\n    return this.authService.login(body);\n  }\n\n  @Get('users')\n  async getUsers() {\n    return this.authService.findAll();\n  }\n}","import { Module } from '@nestjs/common';\nimport { MongooseModule } from '@nestjs/mongoose';\nimport { AuthController } from './auth.controller';\nimport { AuthService } from './auth.service';\nimport { User, UserSchema } from '../schemas/user.schema';\n\n@Module({\n  imports: [\n    MongooseModule.forFeature([{ name: User.name, schema: UserSchema }]),\n  ],\n  controllers: [AuthController],\n  providers: [AuthService],\n})\nexport class AuthModule {}\r\n","import { Module } from '@nestjs/common';\nimport { ConfigModule, ConfigService } from '@nestjs/config';\nimport { MongooseModule } from '@nestjs/mongoose';\nimport { AuthModule } from './auth/auth.module'; // Tu m√≥dulo de usuarios\n\n@Module({\n  imports: [\n    // 1. Cargar configuraci√≥n segura\n    ConfigModule.forRoot({\n      isGlobal: true,\n      envFilePath: '.env',\n    }),\n\n    // 2. Conectar a Base de Datos (Esperando a que cargue la config)\n    MongooseModule.forRootAsync({\n      imports: [ConfigModule],\n      useFactory: async (configService: ConfigService) => ({\n        uri: configService.get<string>('MONGO_URI'),\n      }),\n      inject: [ConfigService],\n    }),\n\n    // 3. Tus m√≥dulos de negocio\n    AuthModule,\n  ],\n  controllers: [],\n  providers: [],\n})\nexport class AppModule {}","import 'reflect-metadata';\nimport { Logger, ValidationPipe } from '@nestjs/common';\nimport { NestFactory } from '@nestjs/core';\nimport { AppModule } from './app/app.module';\n\nasync function bootstrap() {\n  const logger = new Logger('Bootstrap');\n  try {\n    const app = await NestFactory.create(AppModule);\n    \n    // üëá ESTO ES VITAL PARA QUE NO DE ERROR \"FAILED TO FETCH\"\n    app.enableCors(); \n    app.setGlobalPrefix('api'); // Esto hace que la ruta sea /api/auth/login\n    \n    app.useGlobalPipes(new ValidationPipe({\n      whitelist: true,\n      transform: true,\n    }));\n\n    const port = process.env.PORT || 3333;\n    await app.listen(port);\n    \n    logger.log(`üöÄ BACKEND LISTO en: http://localhost:${port}/api`);\n  } catch (error) {\n    logger.error('‚ùå ERROR FATAL:', error);\n    process.exit(1);\n  }\n}\nbootstrap();"],"names":["require","User","Prop","required","unique","Schema","UserSchema","SchemaFactory","createForClass","AuthService","constructor","userModel","register","body","this","save","login","user","findOne","email","UnauthorizedException","password","message","id","_id","name","role","access_token","findAll","find","exec","Injectable","InjectModel","Model","AuthController","authService","getUsers","Post","Body","HttpCode","HttpStatus","OK","Get","Controller","AuthModule","Module","imports","MongooseModule","forFeature","schema","controllers","providers","AppModule","ConfigModule","forRoot","isGlobal","envFilePath","forRootAsync","useFactory","async","configService","uri","get","inject","ConfigService","logger","Logger","app","NestFactory","create","enableCors","setGlobalPrefix","useGlobalPipes","ValidationPipe","whitelist","transform","port","process","env","PORT","listen","log","error","exit","bootstrap"],"sourceRoot":""}